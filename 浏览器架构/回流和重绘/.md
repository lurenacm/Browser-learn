## 页面的渲染流程
[页面的渲染流程](img/页面的渲染流程.jpg)
* 浏览器渲染页面的流程
> 浏览器会先把 `HTML` 解析成 `DOM树` 计算 `DOM` 结构；然后加载 `CSS`  解析成 `CSSOM`；最后将 `DOM 和 CSSOM` 合并生成渲染树 `Render Tree`；最后浏览器按照 `render tree` 绘制页面生成布局 `flow`，浏览器画出渲染树 `Render Tree` 的所有节点。最后将布局绘制在屏幕上生成界面。

### 重排（DOM 回流）
> 重排是指 `render tree` 某些 `DOM` 结构发生了变化，浏览器重新渲染 `DOM` 的这个过程就是`重排（DOM 回流）`，重排会消耗页面很大的性能，这也是虚拟 DOM 被引入的原因。
#### 发生重排的情况
* 添加或删除DOM节点，改变了 `render tree`
* 节点的几何属性改变，比如`width, height, border, padding,margin等`被改变
* 查找盒子属性的 `offsetWidth、offsetHeight、client、scroll`等，浏览器为了得到这些属性会重排操作。
* 元素的位置，元素的字体大小等也会导致DOM的回流
* 框架中`v-if`操作也会导致回流的发生。
* 等等


### 重绘
> 重绘是指 页面的样式发生了改变但是 `DOM` 结构/布局没有发生改变。比如颜色发生了变化，浏览器就会对需要的颜色进行重新绘制。

#### 发生重绘的情况
* 元素颜色的`color`发生改变

### 直接合成
> 如果我们更改了一个不影响布局和绘制的属性，浏览器的渲染引擎会跳过重排和重绘的阶段，直接合成
* 比如我们使用了CSS 的 transform 属性，浏览器的可以师姐合成动画效果。

__重排一定会引发重绘，但是重绘不一定会导致重排__

### 重排 (DOM回流)和重绘吗？说一下区别
> 思路：先讲述浏览器的渲染机制->重排和重绘的概念->怎么减少重排和重绘。。。
#### 区别
> 重排会导致 `DOM结构` 发生改变，浏览器需要重新渲染布局生成页面，但是重绘不会引发 DOM 的改变只是样式上的改变，前者的会消耗很大的性能。

#### 如何减少重排和重绘
* `CSS` 中: 1. 避免使用 `table` 布局，因为 `table` 布局计算的时间比较长耗性能；
* 2. 避免使用内联样式；
* 3. 将动画效果设计在文档流之上即 `position`属性的`absolute` 或 `fixed` 上
* 4. 避免使用 CSS 表达式

* `Javascript` 中: 1.对同一元素对象添加样式的时候一次性添加完，可以将需要的样式都加入到 class 中。2.避免设置多层内联样式。3. 避免频繁操作 DOM。
* 4. 复杂的动画效果使用绝对定位，来脱离文档流。


## 参考
[浏览器工作原理与实践]




