## 浏览器的底层渲染机制
[浏览器的5个进程](./img/浏览器的5个进程.jpg)
> 浏览器在获取服务器的资源后将 html 解析成 DOM 树，CSS 计算成 CSSOM 树，将两者合成 render tree。具体如下浏览器根据 render tree 布局生成一个页面。

## 浏览器加载资源的机制
* 浏览器会开辟一个 GUI 渲染线程，自上而下执行代码，专门用于渲染渲染页面的线程。

### 遇到 CSS 资源
* 遇到 `<style>` 内联标签会交给 GUI 渲染线程解析，但是遇到 `<link>` 标签会异步处理，浏览器会开辟一个 `HTTP` 请求处理的线程，GUI 渲染线程继续往下执行
* 如果遇到`@import` 时，也会开辟一个新的 `HTTP` 请求线程处理，由于 `@import` 是同步的 GUI 渲染线程会阻塞等待请求的结果。
> 需要注意 chrome 中，同一个源下，最多同时开辟 6-7 和 HTTP 请求线程。

### 遇到 JS 资源
* 遇到 `<script></script>` 资源，默认是同步的。 此时 GUI 渲染线程会阻塞。等待 JS 渲染线程渲染结束后，GUI 线程才会继续渲染。
* 如果遇到 `<script async></script>` 那么资源是异步的 `async`，浏览器也会开辟一个 `HTTP` 请求线程加载资源，这时 GUI 渲染线程会继续向下渲染，请求的资源回来后 JS 渲染线程开始执行，GUI 线程再次被阻塞。 
* 如果遇到 `<script defer></script>` 和 async 类似都会开辟一个新的`HTTP`线程，GUI 继续渲染。和 async 不一样的地方在于 `defer` 请求回来的资源需要等待 GUI 同步的代码执行结束后才执行 defer 请求回来的代码。
[GUI渲染和script](./img/GUI渲染遇到script.jpg)


### 图片或音频
* 遇到 `<img/>` 异步，也会开辟一个新的 HTTP 线程请求资源。GUI 继续渲染，当 GUI 渲染结束后，才会处理请求的资源。

__需要注意的是：假设某些资源加载很慢，浏览器会忽略这些资源接着渲染后面的代码__

## 浏览解析资源的机制
* 浏览器是怎样解析加载回来的资源文件的？ 页面自上而下渲染时会确定一个 `DOM树`，`CSSOM树`，最后 `DOM树` 和 `CSSOM树` 会被合并成 `render 树` 

### DOM 树
> 所谓的 DOM 树是确定好节点之间的父子、兄弟关系。这是 GUI 渲染线程自上而下渲染结束后生成的，等到 CSS 资源请求回来以后会生成 CSSOM 样式树。
[DOM树](./img/DOM树.jpg)

### CSSOM 树
> CSSOM(CSS Object Model)， CSS 资源加载回来以后会被渲染成 `样式树`
[CSSOM树](./img/样式树.jpg)

### Render tree 渲染树
> 浏览器根据 Render tree 渲染页面需要经历下面几个步骤。
[]()
* 

